# Learning style questions
QUESTIONS = [
        {
            'text': "I need to find the way to a shop that a friend has recommended. I would:",
            'options': [
                {'value': 'a', 'text': 'find out where the shop is in relation to somewhere I know.'},
                {'value': 'b', 'text': 'ask my friend to tell me the directions.'},
                {'value': 'c', 'text': 'write down the street directions I need to remember.'},
                {'value': 'd', 'text': 'use a map.'},
            ]
        },
        {
            'text': "A website has a video showing how to make a special graph or chart. There is a person speaking, some lists and words describing what to do and some diagrams. I would learn most from:",
            'options': [
                {'value': 'a', 'text': 'seeing the diagrams.'},
                {'value': 'b', 'text': 'listening.'},
                {'value': 'c', 'text': 'reading the words.'},
                {'value': 'd', 'text': 'watching the actions.'},
            ]
        },
        {
            'text': "I want to find out more about a tour that I am going on. I would:",
            'options': [
                {'value': 'a', 'text': 'look at details about the highlights and activities on the tour.'},
                {'value': 'b', 'text': 'use a map and see where the places are.'},
                {'value': 'c', 'text': 'read about the tour on the itinerary.'},
                {'value': 'd', 'text': 'talk with the person who planned the tour or others who are going on the tour.'},
            ]
        },
        {
            'text': "When choosing a career or area of study, these are important for me:",
            'options': [
                {'value': 'a', 'text': 'Applying my knowledge in real situations.'},
                {'value': 'b', 'text': 'Communicating with others through discussion.'},
                {'value': 'c', 'text': 'Working with designs, maps or charts.'},
                {'value': 'd', 'text': 'Using words well in written communications.'},
            ]
        },
        {
            'text': "When I am learning I:",
            'options': [
                {'value': 'a', 'text': 'like to talk things through.'},
                {'value': 'b', 'text': 'see patterns in things.'},
                {'value': 'c', 'text': 'use examples and applications.'},
                {'value': 'd', 'text': 'read books, articles and handouts.'},
            ]
        },
        {
            'text': "I want to save more money and to decide between a range of options. I would:",
            'options': [
                {'value': 'a', 'text': 'consider examples of each option using my financial information.'},
                {'value': 'b', 'text': 'read a print brochure that describes the options in detail.'},
                {'value': 'c', 'text': 'use graphs showing different options for different time periods.'},
                {'value': 'd', 'text': 'talk with an expert about the options.'},
            ]
        },
        {
            'text': "I want to learn how to play a new board game or card game. I would:",
            'options': [
                {'value': 'a', 'text': 'watch others play the game before joining in.'},
                {'value': 'b', 'text': 'listen to somebody explaining it and ask questions.'},
                {'value': 'c', 'text': 'use the diagrams that explain the various stages, moves and strategies in the game.'},
                {'value': 'd', 'text': 'read the instructions.'},
            ]
        },
        {
            'text': "I have a problem with my heart. I would prefer that the doctor:",
            'options': [
                {'value': 'a', 'text': 'gave me something to read to explain what was wrong.'},
                {'value': 'b', 'text': 'used a plastic model to show me what was wrong.'},
                {'value': 'c', 'text': 'described what was wrong.'},
                {'value': 'd', 'text': 'showed me a diagram of what was wrong.'},
            ]
        },
        {
            'text': "I want to learn to do something new on a computer. I would:",
            'options': [
                {'value': 'a', 'text': 'read the written instructions that came with the program.'},
                {'value': 'b', 'text': 'talk with people who know about the program.'},
                {'value': 'c', 'text': 'start using it and learn by trial and error.'},
                {'value': 'd', 'text': 'follow the diagrams in a book.'},
            ]
        },
        {
            'text': "When learning from the Internet I like:",
            'options': [
                {'value': 'a', 'text': 'videos showing how to do or make things.'},
                {'value': 'b', 'text': 'interesting design and visual features.'},
                {'value': 'c', 'text': 'interesting written descriptions, lists and explanations.'},
                {'value': 'd', 'text': 'audio channels where I can listen to podcasts or interviews.'},
            ]
        },
        {
            'text': "I want to learn about a new project. I would ask for:",
            'options': [
                {'value': 'a', 'text': 'diagrams to show the project stages with charts of benefits and costs.'},
                {'value': 'b', 'text': 'a written report describing the main features of the project.'},
                {'value': 'c', 'text': 'an opportunity to discuss the project.'},
                {'value': 'd', 'text': 'examples where the project has been used successfully.'},
            ]
        },
        {
            'text': "I want to learn how to take better photos. I would:",
            'options': [
                {'value': 'a', 'text': 'ask questions and talk about the camera and its features.'},
                {'value': 'b', 'text': 'use the written instructions about what to do.'},
                {'value': 'c', 'text': 'use diagrams showing the camera and what each part does.'},
                {'value': 'd', 'text': 'use examples of good and poor photos showing how to improve them.'},
            ]
        },
        {
            'text': "I prefer a presenter or a teacher who uses:",
            'options': [
                {'value': 'a', 'text': 'demonstrations, models or practical sessions.'},
                {'value': 'b', 'text': 'question and answer, talk, group discussion, or guest speakers.'},
                {'value': 'c', 'text': 'handouts, books, or readings.'},
                {'value': 'd', 'text': 'diagrams, charts, maps or graphs.'},
            ]
        },
        {
            'text': "I have finished a competition or test and I would like some feedback. I would like to have feedback:",
            'options': [
                {'value': 'a', 'text': 'using examples from what I have done.'},
                {'value': 'b', 'text': 'using a written description of my results.'},
                {'value': 'c', 'text': 'from somebody who talks it through with me.'},
                {'value': 'd', 'text': 'using graphs showing what I achieved.'},
            ]
        },
        {
            'text': "I want to find out about a house or an apartment. Before visiting it I would want:",
            'options': [
                {'value': 'a', 'text': 'to view a video of the property.'},
                {'value': 'b', 'text': 'a discussion with the owner.'},
                {'value': 'c', 'text': 'a printed description of the rooms and features.'},
                {'value': 'd', 'text': 'a plan showing the rooms and a map of the area.'},
            ]
        },
        {
            'text': "I want to assemble a wooden table that came in parts (kitset). I would learn best from:",
            'options': [
                {'value': 'a', 'text': 'diagrams showing each stage of the assembly.'},
                {'value': 'b', 'text': 'advice from someone who has done it before.'},
                {'value': 'c', 'text': 'written instructions that came with the parts for the table.'},
                {'value': 'd', 'text': 'watching a video of a person assembling a similar table.'},
            ]
        },
    ]



SCORING_CHART = [
    {"a": "K", "b": "A", "c": "R", "d": "V"},
    {"a": "V", "b": "A", "c": "R", "d": "K"},
    {"a": "K", "b": "V", "c": "R", "d": "A"},
    {"a": "K", "b": "A", "c": "V", "d": "R"},
    {"a": "A", "b": "V", "c": "K", "d": "R"},
    {"a": "K", "b": "R", "c": "V", "d": "A"},
    {"a": "K", "b": "A", "c": "V", "d": "R"},
    {"a": "R", "b": "K", "c": "A", "d": "V"},
    {"a": "R", "b": "A", "c": "K", "d": "V"},
    {"a": "K", "b": "V", "c": "R", "d": "A"},
    {"a": "V", "b": "R", "c": "A", "d": "K"},
    {"a": "A", "b": "R", "c": "V", "d": "K"},
    {"a": "K", "b": "A", "c": "R", "d": "V"},
    {"a": "K", "b": "R", "c": "A", "d": "V"},
    {"a": "K", "b": "A", "c": "R", "d": "V"},
    {"a": "V", "b": "A", "c": "R", "d": "K"}
]

def calculate_vark_scores(answers):
    """
    Calculate VARK scores based on answers
    :param answers: dict of question numbers and their answers
    :return: dict of VARK category counts
    """
    category_counts = {"V": 0, "A": 0, "R": 0, "K": 0}
    
    for q_num, answer_string in answers.items():
        # Split the comma-separated answers
        q_answers = answer_string.split(',')
        q_index = int(q_num[1:]) - 1  # Convert q1 to index 0
        
        # Add scores for each selected answer
        for ans in q_answers:
            category = SCORING_CHART[q_index].get(ans)
            if category:
                category_counts[category] += 1
    
    return category_counts
