{% extends 'base.html' %}

{% block title %}
 Analysis | Youth Road Analyzer
{% endblock title %}

{% block content %}

  <form method="POST">
    {% csrf_token %}
    <label for="column">Select a Column for Analysis:</label>
    {{ form.column }}
    <br>
    <label for="group_by">Group By (Optional):</label>
    {{ form.group_by }}
    <br>
    <button type="submit">Analyze</button>
  </form>

  {% if plot_html %}
    <h2>Plot for Selected Column</h2>
    <div>
      {{ plot_html|safe }}
    </div>
  {% endif %}

  {% if statistics %}
    <h2>Statistics for Selected Column</h2>
    <ul>
      {% for key, value in statistics.items %}
        <li>
          <strong>{{ key }}</strong>: 
          {% if value|length > 1 and value.items %}
            <ul>
              {% for sub_key, sub_value in value.items %}
                <li>{{ sub_key }}: {{ sub_value }}</li>
              {% endfor %}
            </ul>
          {% else %}
            {{ value }}
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  {% if column_values %}
    <h2>Raw Values for Selected Column</h2>
    <ul>
      {% for value in column_values %}
        <li>{{ value }}</li>
      {% endfor %}
    </ul>
  {% endif %}

{% endblock content %}

{% block js %}
  <!-- Add any specific JavaScript here if needed -->
{% endblock js %}
